# 4. 데이터베이스 메타데이터로 작업하기

SQLAlchemy Core와 ORM의 핵심은 SQL Expression 입니다.<br>

이 SQLAlchemy Core와 ORM은 파이썬 객체를 데이터베이스의 테이블과 컬럼처럼 사용할 수 있게 하기 위해서 만들어졌습니다.<br>

이러한 것들을 데이터베이스 메타데이터로 사용할 수 있습니다.

> 메타데이터는 데이터를 기술하는 데이터를 설명합니다. 기본적으로 SQLAlchemy 공식문서에서는 메타데이터라는 용어는 일반적으로 구성된 테이블, 열, 제약 조건 및 기타 객체 정보 등을 말합니다.

SQLAlchemy에서 가장 일반적으로 많이 사용하는 데이터베이스 메타데이터는 MetaData, Table, Column이 있습니다.<br>

밑에서는 메타데이터를 어떻게 사용하는지 보여줍니다.<br>

ORM 지향 스타일 뿐만 아니라 코어 지향 스타일도 적혀있습니다.

## 테이블 객체를 메타데이터 설정하기

관계형 데이터베이스로 작업할 때, 만들려는 기본구조를 쿼리를 통해서 테이블을 만듭니다.<br>

SQLAlchemy에서는 테이블과 유사한 Python객체(Table)를 만듭니다.<br>

SQLAlchemy 표현 언어를 시작할려면 사용할려는 데이터베이스 테이블을 Table객체로 만들어줘야합니다.<br>

각각 Table 객체는 코드를 통해서 명확하게 설정하거나, 기존의 데이터베이스에서 정의되어 있는 것을 반영시킵니다. 또는 이 두가지 방법을 혼합하여서 사용할 수 있습니다.
<br><br>
표를 선언하던 반영을 하던 우리는 컬렉션을 가지고 시작합니다. 우리가 메타데이터를 통해서 테이블을 배치합니다.<br>

이 물체는 본질적으로 파이썬 딕셔너리 형입니다. 키는 문자열에 일련의 테이블 객체를 저장합니다. 이를 사용하는 코드는 다음과 같습니다.

```python
>>> from sqlalchemy import MetaData
>>> metadata = MeatData()
```

메타데이터를 선언하면 몇 가지의 테이블 객체를 선언할 수 있습니다.<br>

이 튜토리얼은 user 테이블을 모델로 만듭니다. 다음을 참고해주세요.

```python
from sqlalchemy import Table, Column, Inteager, String
user_table = Table(
    'user_account',
    metadata,
    Column('id', Inteager, primaray_key=True),
	Column('id', String(30)),
	Column('fullname', String),
)
```
위를 처음 보는 사람은 SQL의 CREATE TABLE 구문과 유사하게 보일겁니다. 위 코드는 테이블을 정의하고 각 테이블의 컬럼을 정의하며 컬럼의 속성을 정의합니다.<br>

상세하게는 다음과 같습니다.
- Table : 데이터베이스 테이블을 나타내며 자체적으로 메타데이터 콜렉션을 할당합니다.
- Column : 데이터베이스 테이블의 열을 나타냅니다. 테이블 개체를 할당합니다. Column은 일반적으로 문자열 이름과 유형 객체가 포함됩니다.
```python
>>> user_table.c.name
Column('name', String(length=30), table=<user_account>)

>>> user_table.c.keys()
['id', 'name', 'fullname']
```

